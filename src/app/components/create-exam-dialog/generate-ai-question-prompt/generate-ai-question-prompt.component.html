<ng-container>
  <app-dialog-header
    dialogTitle="Generate AI Prompt for Exam Question"
    okayLabel="Generate"
    (closeAction)="closeDialog()"
  ></app-dialog-header>

  <div mat-dialog-content class="dialog-content" [formGroup]="promptForm">
    <p style="padding: 25px">
      Generate an AI Prompt for {{questionDisplay}} Exam Question.
    </p>

    <div class="row">
      <mat-form-field
        class="form-field"
        appearance="outline"
        class="col"
        (selectionChange)="onAudioPromptTypeChange()"
      >
        <mat-label>Select Question Type</mat-label>
        <mat-select formControlName="audioPromptTypeSelect">
          <mat-option
            *ngFor="let promptType of isAudioPrompt ? audioPromptTypes : writtenPromptTypes"
            [value]="promptType"
          >
            {{ promptType }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="row">
      <mat-form-field class="form-field" appearance="outline" class="col">
        <mat-label>Select Exam Type</mat-label>
        <mat-select formControlName="examTypeSelect">
          <mat-option *ngFor="let examType of eslTestTypes" [value]="examType">
            {{ examType }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="row" *ngIf="isAudioPrompt">
      <mat-form-field class="form-field" appearance="outline" class="col">
        <mat-label>Choose the Speaker's Accent</mat-label>
        <mat-select formControlName="accentSelect">
          <mat-option *ngFor="let accent of accents" [value]="accent">
            {{ accent }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="row" *ngIf="isAudioPrompt">
      <mat-form-field class="form-field" appearance="outline" class="col">
        <mat-label>Choose the Speaker's Gender</mat-label>
        <mat-select formControlName="genderSelect">
          <mat-option *ngFor="let gender of genders" [value]="gender">
            {{ gender }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="row">
      <mat-form-field class="form-field" appearance="outline" class="col">
        <mat-label
          *ngIf="isAudioPrompt && promptForm.controls['audioPromptTypeSelect'].value.toLowerCase() === 'repeat sentence'"
          >Number of sentences</mat-label
        >
        <mat-label
          *ngIf="isAudioPrompt && promptForm.controls['audioPromptTypeSelect'].value.toLowerCase() !== 'repeat sentence'"
          >Approximate Audio length (seconds)</mat-label
        >
        <mat-label *ngIf="!isAudioPrompt">Approximate Word Count</mat-label>
        <input
          matInput
          id="length"
          formControlName="length"
          type="number"
          [placeholder]="isAudioPrompt ? 'The approximate number of sentences audio that will be generated by the AI.' : 'The approximate word length of the prompt that will be generated by the AI'"
        />
        <mat-error>
          <app-error-message
            [control]="promptForm.controls['length'].errors"
          ></app-error-message>
        </mat-error>
      </mat-form-field>
    </div>
  </div>

  <app-dialog-actions
    (saveAction)="closeDialog(true)"
    (cancelAction)="closeDialog()"
    saveButtonName="Generate"
    [disabled]="this.promptForm.invalid"
  ></app-dialog-actions>
</ng-container>
