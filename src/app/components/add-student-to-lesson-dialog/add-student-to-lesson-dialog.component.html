<div class="dialog-title-container">
  <h2 mat-dialog-title>Choose students to enrol in lesson</h2>
</div>

<div>Showing students of level: {{getLevelList()}}</div>

<mat-list style="margin-top: 10px">
  <ng-container
    *ngFor="let student of data.filteredStudents; let index = index"
  >
    <mat-list-item
      style="
        display: flex;
        justify-content: space-between;
        width: 100%;
        margin-bottom: 10px;
      "
    >
      <mat-checkbox
        #checkboxRef
        [id]="'checkbox' + index"
        [checked]="lesson.studentsEnrolled.includes(student.email)"
        (change)="enrolStudent($event.checked, index, student)"
        [disabled]="enrolledStudents.length >= lesson.maxStudents && !enrolledStudents.includes(student)"
        >{{student.name}} ({{ student.email }})</mat-checkbox
      >
    </mat-list-item>
  </ng-container>
</mat-list>

<div mat-dialog-actions align="end">
  <button mat-button (click)="closeDialog(null)">Cancel</button>
  <button mat-button [mat-dialog-close]="enrolledStudents">Save</button>
</div>
